<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="description" content="Description">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <link rel="stylesheet" href="//unpkg.com/docsify/lib/themes/vue.css">
</head>

<body>

  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk/dist/gitalk.css">

  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/gitalk.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js"></script>

  <div id="app"></div>
  <div id="gitalk-container"></div>
  <script>
    window.$docsify = {
      name: '',
      nameLink: '', // 链接到的地址
      logo: '',
      repo: '',
      auto2top: true, // 更改线路自动滚动到顶部
      loadSidebar: true,
      loadNavbar: true,
      coverpage: true,
      Plugin:[
        function(hook,vm){
          hook.doneEach(function(){
            const label = vm.route.path.split("/").pop().split('.')[0];
            gitalkRender(vm,label)
          })
        }
      ]
      // homepage:'home.md', //  您的 docs 文件夹中的 将被视为您网站的主页，但有时您可能需要提供另一个文件作为您的主页。
      // basePath:'https://docsify.js.org', // 网站的基本路径，也可以设置其他域名
      // relative:true, // 启用相对路径
      // themeColor:'#ff6699', //主题颜色
      // alias:{}, // 别名 
      // autoHeader:true,// 对于 中的每个链接_sidebar.md，在将其转换为 HTML 之前，在页面前添加标题。


    }
  </script>
  <!-- Docsify v4 -->
  <script src="//cdn.jsdelivr.net/npm/docsify@4"></script>
  <script>
    function gitalkRender(vm, label) {
      let domObj, main, divEle, gitalk;

      domObj = Docsify.dom;
      main = domObj.getNode("#main");
      console.log(main);
      Array.apply(
        null,
        document.querySelectorAll("div.gitalk-container")
      ).forEach(function (ele) {
        ele.remove();
      });

      divEle = domObj.create("div");
      divEle.id = "gitalk-container-" + label;
      divEle.className = "gitalk-container";
      divEle.style = "width: " + main.clientWidth + "px; margin: 0 auto 20px;";
      domObj.appendTo(domObj.find(".content"), divEle);
      const gitalk = new Gitalk({
        clientID: 'Github Application Client ID',
        clientSecret: 'Github Application Client Secret',
        repo: 'Github repo',
        owner: 'Github repo owner',
        admin: ['Github repo collaborators, only these guys can initialize github issues'],
        // facebook-like distraction free mode
        distractionFreeMode: false
      })
      gitalk.render("gitalk-container-" + label);
    }
  </script>
</body>

</html>